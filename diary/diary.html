<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="globals.css" />
    <link rel="stylesheet" href="diary_style.css" />
    <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
  </head>

  <body>
    <div class="div-wrapper">
      <div class="div">
        <div class="div-2">
          <div class="view">
            <div class="today_activity">
              <div class="activity_text">
                <div class="text-wrapper">운동</div>
                <div class="text-wrapper-2">휴식</div>
                <div class="text-wrapper-3">공부</div>
                <div class="text-wrapper-4">일</div>
                <div class="text-wrapper-5">쇼핑</div>
              </div>
              
              <div class="activity_icon">
                <label for="rest">
                    <input type="checkbox" name="rating" class="activity" id="rest" value="rest" />
                    <img class="rest_img" src="../icon/휴식.png" />
                </label>
                <label for="health">
                    <input type="checkbox" name="rating" class="activity" id="health" value="health" />
                    <img class="health_img" src="../icon/운동.png" />
                </label>
                <label for="study">
                    <input type="checkbox" name="rating" class="activity" id="study" value="study" />
                    <img class="study_img" src="../icon/공부.png" />
                </label>
                <label for="work">
                    <input type="checkbox" name="rating" class="activity" id="work" value="work" />
                    <img class="work_img" src="../icon/일.png" />
                </label>
                <label for="shopping">
                    <input type="checkbox" name="rating" class="activity" id="shopping" value="shopping" />
                    <img class="shopping_img" src="../icon/쇼핑.png" />
                </label>
              </div>
            </div>
            <div class="text_rectangle">
              <div class="text-wrapper-6">오늘의 활동</div>
            </div>
          </div>
          <div class="view-3">
            <div class="text_rectangle">
              <div class="text-wrapper-6">오늘의 날씨</div>
            </div>
            <div class="div-3">
              <div class="element">
                <div class="view-4">
                    <label for="sunny">
                        <input type="checkbox" name="weather" class="activity" id="sunny" value="sunny" />
                        <img class="image-5" src="../icon/맑음.png" />
                    </label>
                    <label for="흐림">
                        <input type="checkbox" name="weather" class="activity" id="흐림" value="흐림" />
                        <img class="image-6" src="../icon/흐림.png" />
                    </label>
                    <label for="비">
                        <input type="checkbox" name="weather" class="activity" id="비" value="비" />
                        <img class="image-7" src="../icon/비.png" />
                    </label>
                    <label for="눈">
                        <input type="checkbox" name="weather" class="activity" id="눈" value="눈" />
                        <img class="image-8" src="../icon/눈.png" />
                    </label>
                  
                </div>
                <div class="view-5">
                  <div class="text-wrapper-7">흐림</div>
                  <div class="text-wrapper-8">맑음</div>
                  <div class="text-wrapper-9">비</div>
                  <div class="text-wrapper-10">눈</div>
                </div>
              </div>
              <div class="element-2">
                <div class="view-6">
                  <div class="text-wrapper-7">폭풍</div>
                  <div class="text-wrapper-8">바람</div>
                  <div class="text-wrapper-9">더움</div>
                  <div class="text-wrapper-10">추움</div>
                </div>
                <div class="view-4">
                    <label for="폭풍">
                        <input type="checkbox" name="weather" class="activity" id="폭풍" value="폭풍" />
                        <img class="image-9" src="../icon/폭풍.png" />
                    </label>
                    <label for="바람">
                        <input type="checkbox" name="weather" class="activity" id="바람" value="바람" />
                        <img class="image-10" src="../icon/바람.png" />
                    </label>
                    <label for="더움">
                        <input type="checkbox" name="weather" class="activity" id="더움" value="더움" />
                        <img class="image-11" src="../icon/더움.png" />
                    </label>
                    <label for="추움">
                        <input type="checkbox" name="weather" class="activity" id="추움" value="추움" />
                        <img class="image-12" src="../icon/추움.png" />
                    </label>
                </div>
              </div>
            </div>
          </div>
          <div class="view-7">
            <div class="overlap-2">
              <div class="text-wrapper-11" contenteditable="true" onfocus="clearPlaceholder(this)" onblur="restorePlaceholder(this)">
                내용 입력해주세요</div>
            </div>
            <div class="view-8">
              <div class="text_rectangle">
                <div class="text-wrapper-6">오늘의 일기</div>
              </div>
            </div>
          </div>
        </div>
        <div class="overlap-wrapper">
          <div class="overlap-3">
            <div class="text-wrapper-12">완&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 료</div>
          </div>
        </div>
        <div class="view-9">
          <div class="text-wrapper-13"></div>
          <img class="image-13" src="../icon/뒤로가기 버튼.png" style="cursor: pointer;" onclick="confirmExit()" />
          <div class="rectangle-2"></div>
        </div>
      </div>
    </div>

    <script>
      document.addEventListener("DOMContentLoaded", () => {
        const params = new URLSearchParams(window.location.search);
        const month = params.get("month");
        const day = params.get("day");
        let dayOfWeek = params.get("dayofweek");
        let dayNames = ["일", "월", "화", "수", "목", "금", "토"];
        dayOfWeek = dayNames[dayOfWeek];
    
        if (month && day && dayOfWeek) {
            const dateText = `${month}월 ${day}일 (${dayOfWeek})`;
            const view9Element = document.querySelector(".view-9 .text-wrapper-13");
            if (view9Element) {
              view9Element.textContent = dateText;
            } else {
              console.error("text-wrapper-13 not found");
            }
          } else {
            console.error("Date parameters are missing in the URL");
          }
        });

      function confirmExit() {
        swal({
            title: "편집한 내용이 저장되지 않았어요.",
            text: "정말 나가시는 거예요? 🥹",
            icon: "warning",
            buttons: {
                cancel: "취소",
                confirm: {
                    text: "확인",
                    value: true,
                    visible: true,
                    className: "btn-danger",
                    closeModal: true
                }
            }
        }).then((isConfirm) => {
            if (isConfirm) {
                const params = new URLSearchParams(window.location.search);
                const year = params.get('year');
                const month = params.get('month');
                const day = params.get('day');
                window.location.href = `../main/main.html?year=${year}&month=${month}&day=${day}`;
            }
        });
      }

      function clearPlaceholder(element) {
        if (element.textContent === "내용을 입력해주세요") {
            element.textContent = ""; // placeholder 제거
        }
    }
    
    function restorePlaceholder(element) {
        if (element.textContent.trim() === "") {
            element.textContent = "내용을 입력해주세요"; // placeholder 복원
        }
    }
    </script>
  </body>
</html>
